<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Quick Planner</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/tokens.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>

  <aside class="sidebar-rail">
    <button id="sidebar-top" class="sidebar-top" title="Back to board" aria-label="Go to board">
      <span class="sidebar-logo-icon">Qp</span>
      <span class="sidebar-logo-text">Quick Planner</span>
    </button>
    <div class="sidebar-projects">
      <div class="sidebar-projects-header">
        <svg class="sidebar-projects-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"/></svg>
        <span class="sidebar-label sidebar-projects-title">Projects</span>
        <button id="sidebar-import-btn" class="sidebar-projects-add sidebar-label" title="Add project" aria-label="Add project">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 4.5v15m7.5-7.5h-15"/></svg>
        </button>
        <div id="sidebar-add-menu" class="sidebar-project-menu">
          <button class="sidebar-project-menu-item" id="sidebar-add-template-btn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px;flex-shrink:0"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
            New project from templates
          </button>
          <button class="sidebar-project-menu-item" id="sidebar-add-import-btn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px;flex-shrink:0"><path d="M4 16v1a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-1M16 11l-4 4m0 0-4-4m4 4V3"/></svg>
            Import
          </button>
        </div>
      </div>
      <ul id="sidebar-projects-list" class="sidebar-projects-list sidebar-label"></ul>
    </div>

    <nav class="sidebar-nav">
      <button id="sidebar-trash-btn" class="sidebar-item" title="Trash">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"/></svg>
        <span class="sidebar-label">Trash</span>
      </button>
      <button id="sidebar-settings-btn" class="sidebar-item" title="Color settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"/><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></svg>
        <span class="sidebar-label">Settings</span>
      </button>
      <label id="sidebar-theme-toggle" class="sidebar-item sidebar-theme-item" title="Toggle dark mode">
        <input type="checkbox" class="toggle-input" id="sidebar-theme-checkbox">
        <span class="theme-pill">
          <span class="theme-pill-thumb">
            <svg class="theme-pill-icon icon-sun" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg>
            <svg class="theme-pill-icon icon-moon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"/></svg>
          </span>
        </span>
        <span class="sidebar-label">Theme mode</span>
      </label>
    </nav>
    <div class="sidebar-bottom">
      <span id="sidebar-last-synced" class="sidebar-label"></span>
      <button id="sidebar-toggle" class="sidebar-item sidebar-toggle-btn" title="Show or hide menu" aria-expanded="false" aria-label="Toggle sidebar menu">
        <svg class="sidebar-toggle-icon icon-eye-open" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"/><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></svg>
        <svg class="sidebar-toggle-icon icon-eye-closed" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12c1.292 4.338 5.31 7.5 10.066 7.5.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"/></svg>
        <span class="sidebar-label">Menu</span>
      </button>
    </div>
  </aside>

  <nav class="primary-nav">
    <span class="mobile-logo">Qp</span>
    <button id="mobile-menu-btn" class="mobile-menu-btn" title="Open menu" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu-overlay">
      <span class="hamburger-icon">
        <span></span><span></span><span></span>
      </span>
    </button>
  </nav>

  <div id="mobile-search-overlay" class="mobile-search-overlay" role="dialog" aria-modal="true" aria-label="Search tasks">
    <div class="mobile-search-header">
      <div class="mobile-search-input-wrap">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        <input id="mobile-search-input" type="search" placeholder="Search tasks…" autocomplete="off" autocorrect="off" spellcheck="false">
      </div>
      <button id="mobile-search-close" class="mobile-search-close">Cancel</button>
    </div>
    <div id="mobile-search-results" class="mobile-search-results"></div>
  </div>

  <div id="mobile-filter-overlay" class="mobile-filter-overlay" role="dialog" aria-modal="true" aria-label="Filter tasks">
    <div class="mobile-filter-header">
      <span class="mobile-filter-title">Filter</span>
      <button id="mobile-filter-done" class="mobile-filter-done">Done</button>
    </div>
    <div class="mobile-filter-body">
      <div class="mobile-filter-row">
        <label class="mobile-filter-label" for="m-filter-room">Room</label>
        <select id="m-filter-room" class="mobile-filter-select"><option value="">All</option></select>
      </div>
      <div class="mobile-filter-row">
        <label class="mobile-filter-label" for="m-filter-category">Category</label>
        <select id="m-filter-category" class="mobile-filter-select"><option value="">All</option></select>
      </div>
      <div class="mobile-filter-row">
        <label class="mobile-filter-label" for="m-filter-assigned">Assigned</label>
        <select id="m-filter-assigned" class="mobile-filter-select"><option value="">All</option></select>
      </div>
      <div id="m-group-by-wrap" class="mobile-filter-row">
        <label class="mobile-filter-label" for="m-group-by">Group by</label>
        <select id="m-group-by" class="mobile-filter-select">
          <option value="status">Status</option>
          <option value="room">Room</option>
          <option value="category">Category</option>
          <option value="assigned">Assigned</option>
        </select>
      </div>
    </div>
    <div class="mobile-filter-footer">
      <button id="mobile-filter-clear" class="mobile-filter-clear">Clear filters</button>
    </div>
  </div>

  <header class="app-header">
    <div class="toolbar">
      <div class="view-toggle">
        <button class="view-btn" data-view="kanban">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125Z"/></svg>
          Board
        </button>
        <button class="view-btn" data-view="planner">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="transform:rotate(90deg)"><path d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"/></svg>
          Planner
        </button>
        <button class="view-btn" data-view="todolist">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"/></svg>
          To-do
        </button>
      </div>

      <button id="header-add-btn" class="header-add-btn" title="Add task" aria-label="Add task">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
        <span class="header-add-label">ADD TASK</span>
      </button>

      <div class="toolbar-right">
        <div class="search-filter-group">
          <div class="toolbar-search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
            <input id="search-tasks" type="search" placeholder="Search tasks…" autocomplete="off" aria-label="Search tasks">
          </div>
          <div class="desktop-filter-wrap">
            <button id="desktop-filter-btn" class="desktop-filter-btn" title="Filter tasks" aria-label="Filter tasks">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M7 12h10M11 18h2"/></svg>
              <span id="desktop-filter-badge" class="desktop-filter-badge hidden">0</span>
            </button>
          </div>
        </div><!-- /.search-filter-group -->

        <div class="mobile-toolbar-icons">
          <button id="mobile-filter-btn" class="mobile-filter-btn" title="Filter tasks" aria-label="Filter tasks">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M7 12h10M11 18h2"/></svg>
            <span id="mobile-filter-badge" class="mobile-filter-badge hidden">0</span>
          </button>
          <button id="mobile-search-btn" class="mobile-search-btn" title="Search tasks" aria-label="Search tasks">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Filter popover at body level — outside app-header's backdrop-filter stacking context -->
  <div id="desktop-filter-popover" class="desktop-filter-popover hidden">
    <div class="filter-popover-grid">
      <div class="filter-group">
        <label for="filter-room">Room</label>
        <select id="filter-room"><option value="">All</option></select>
      </div>
      <div class="filter-group">
        <label for="filter-category">Category</label>
        <select id="filter-category"><option value="">All</option></select>
      </div>
      <div class="filter-group">
        <label for="filter-assigned">Assigned</label>
        <select id="filter-assigned"><option value="">All</option></select>
      </div>
      <div id="group-by-wrap" class="filter-group">
        <label for="group-by">Group by</label>
        <select id="group-by">
          <option value="status">Status</option>
          <option value="room">Room</option>
          <option value="category">Category</option>
          <option value="assigned">Assigned</option>
        </select>
      </div>
      <div id="view-size-wrap" class="filter-group hidden">
        <label>View size</label>
        <div class="view-size-filter">
          <button class="view-size-btn active" data-size="medium">Medium</button>
          <button class="view-size-btn" data-size="large">Large</button>
        </div>
      </div>
    </div>
  </div>

  <div id="loading" class="loading hidden"></div>

  <div id="error" class="notification notification-error hidden"></div>

  <main>
    <div id="kanban-view" class="kanban-board"></div>
    <div id="planner-view" class="planner-container hidden"></div>
    <div id="todolist-view" class="todolist-container hidden"></div>
    <div id="settings-view" class="settings-view hidden">
      <div class="settings-page-header">
        <button id="settings-back" class="settings-back-btn" title="Back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </button>
        <h2 class="settings-page-title">Settings</h2>
      </div>
      <div class="settings-page-content">

        <section class="settings-card">
          <h3 class="settings-card-title">Brand Palette</h3>
          <p class="settings-card-desc">Pick a theme colour.</p>
          <div class="settings-swatch-group">
            <div id="settings-swatches" class="onboarding-swatches"></div>
            <div id="settings-user-swatches-wrap" class="settings-user-swatches-wrap" style="display:none;">
              <div class="settings-separator"></div>
              <div id="settings-user-swatches" class="onboarding-swatches"></div>
            </div>
          </div>
          <div class="settings-card-actions">
            <button id="settings-reset" class="modal-btn modal-cancel">Reset to defaults</button>
          </div>
        </section>

        <section class="settings-card">
          <label class="toggle-row">
            <span>Background effects</span>
            <input type="checkbox" id="bgfx-active" class="toggle-input">
            <span class="toggle-track"><span class="toggle-thumb"></span></span>
          </label>
        </section>

        <section id="settings-export-section" class="settings-card hidden">
          <h3 class="settings-card-title">Export project</h3>
          <p class="settings-card-desc">Download this project as a CSV spreadsheet.</p>
          <div class="settings-card-actions">
            <button id="settings-export-btn" class="modal-btn modal-cancel">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:6px"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
              Export CSV
            </button>
          </div>
        </section>

      </div>
    </div>

    <div id="trash-view" class="settings-view hidden">
      <div class="settings-page-header trash-page-header">
        <button id="trash-back" class="settings-back-btn" title="Back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </button>
        <h2 class="settings-page-title">Trash</h2>
        <span id="trash-count" class="trash-count"></span>
      </div>
      <div class="settings-page-content">
        <div class="search-filter-group trash-search-group">
          <div class="toolbar-search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
            <input id="trash-search" type="search" placeholder="Search deleted tasks…" autocomplete="off">
          </div>
        </div>
        <div id="trash-list" class="trash-list"></div>
      </div>
    </div>
  </main>

  <script>
    // Prevent FOUC — apply saved theme before paint
    (function() {
      const saved = localStorage.getItem('qp-theme');
      if (saved === 'dark') document.documentElement.setAttribute('data-theme', 'dark');
      const v = localStorage.getItem('qp-view') || 'kanban';
      const btn = document.querySelector('.view-btn[data-view="' + v + '"]');
      if (btn) btn.classList.add('active');
    })();
  </script>
  <div id="mobile-menu-overlay" class="mobile-menu-overlay">
    <nav class="mobile-menu-nav">
      <div class="mobile-menu-projects">
        <div class="mobile-menu-projects-header">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"/></svg>
          <span>Projects</span>
          <button id="mobile-import-btn" class="mobile-import-btn" title="Import project">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 4.5v15m7.5-7.5h-15"/></svg>
          </button>
        </div>
        <ul id="mobile-projects-list" class="mobile-menu-projects-list"></ul>
      </div>
      <button class="mobile-menu-item" data-action="trash" id="mobile-trash-btn">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"/></svg>
        Trash
      </button>
      <button class="mobile-menu-item" data-action="settings" id="mobile-settings-btn">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"/><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></svg>
        Settings
      </button>
      <label class="mobile-menu-item mobile-theme-item" data-action="theme" id="mobile-theme-btn">
        <input type="checkbox" class="toggle-input" id="mobile-theme-checkbox">
        <span class="theme-pill theme-pill-lg">
          <span class="theme-pill-thumb">
            <svg class="theme-pill-icon icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/></svg>
            <svg class="theme-pill-icon icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"/></svg>
          </span>
        </span>
        <span>Theme mode</span>
      </label>
    </nav>
    <div id="mobile-menu-theme-footer" class="mobile-menu-theme-footer">
      <button id="mobile-theme-cancel" class="mobile-theme-footer-btn mobile-theme-cancel">Cancel</button>
      <button id="mobile-theme-save" class="mobile-theme-footer-btn mobile-theme-save">Save</button>
    </div>
  </div>
  <button id="fab-add" class="fab-add" title="Add task" aria-label="Add task">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M12 5v14M5 12h14"/></svg>
  </button>

  <dialog id="import-modal" class="import-modal">
    <div class="import-modal-inner">
      <h2 class="import-modal-title">Import project</h2>

      <div id="import-dropzone" class="import-dropzone">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12M12 16.5V3"/></svg>
        <p class="import-dropzone-label">Drag your CSV here, or <span class="import-browse-link">browse</span></p>
        <p class="import-dropzone-hint">Supports Google Sheets CSV exports</p>
      </div>
      <input type="file" id="import-file-input" accept=".csv" style="display:none">

      <div class="import-divider"><span>or paste a Google Sheets URL</span></div>

      <input type="text" id="import-url-input" class="import-url-input" placeholder="https://docs.google.com/spreadsheets/d/…" autocomplete="off">

      <div id="import-fields" class="import-fields hidden">
        <input type="text" id="import-project-name" class="import-text-input" placeholder="Project name">
        <input type="text" id="import-user-name" class="import-text-input" placeholder="Your first name (optional — for a personal touch)">
      </div>

      <div id="import-error" class="import-error hidden"></div>

      <div id="import-progress" class="import-progress hidden">
        <div class="import-spinner"></div>
        <p id="import-progress-msg" class="import-progress-msg"></p>
      </div>

      <div class="import-actions">
        <button id="import-cancel" class="modal-btn modal-cancel">Cancel</button>
        <button id="import-confirm" class="modal-btn modal-save" disabled>Import</button>
      </div>
    </div>
  </dialog>

  <div id="modal-root"></div>
  <div id="toast-root"></div>
  <script type="module" src="js/app.js"></script>
</body>
</html>
